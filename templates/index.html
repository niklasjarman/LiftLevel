<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiftLevel - Strength Tracking App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1>ðŸ’ª LiftLevel</h1>
                    <p class="tagline">Level up your strength journey</p>
                </div>
                <button id="reset-btn" class="btn-reset" title="Reset character">ðŸ”„ Reset</button>
            </div>
        </header>

        <div class="main-content">
            <!-- Stats Section -->
            <section class="stats-section">
                <div class="level-display">
                    <div class="level-badge">
                        <span class="level-number">Level {{ user_data.level }}</span>
                    </div>
                    <div class="xp-info">
                        <div class="xp-total">{{ user_data.total_xp }} XP</div>
                        <div class="xp-bar-container">
                            <div class="xp-bar" style="width: {{ xp_progress.percentage }}%"></div>
                        </div>
                        <div class="xp-text">
                            {{ xp_progress.current }} / {{ xp_progress.needed }} XP to Level {{ user_data.level + 1 }}
                        </div>
                    </div>
                </div>

                <!-- Character Evolution Image -->
                <div class="character-section">
                    <div class="character-container">
                        <img id="character-image" src="{{ url_for('static', filename='images/level_' + user_data.level|string + '.png') }}" 
                             alt="Level {{ user_data.level }} Character"
                             onerror="this.src='{{ url_for('static', filename='images/placeholder.svg') }}'">
                        <div class="character-label">Level {{ user_data.level }} Evolution</div>
                    </div>
                </div>
            </section>

            <!-- Workout Logging Form -->
            <section class="workout-form-section">
                <h2>Log Workout</h2>
                <form id="workout-form">
                    <div class="form-group">
                        <label for="exercise">Exercise</label>
                        <select id="exercise" name="exercise" required>
                            <option value="">Select an exercise...</option>
                            {% for exercise in exercises %}
                            <option value="{{ exercise.id }}">{{ exercise.name }} ({{ exercise.category }})</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="weight">Weight (lbs)</label>
                            <input type="number" id="weight" name="weight" min="0" step="0.5" required>
                        </div>

                        <div class="form-group">
                            <label for="reps">Reps</label>
                            <input type="number" id="reps" name="reps" min="1" required>
                        </div>

                        <div class="form-group">
                            <label for="sets">Sets</label>
                            <input type="number" id="sets" name="sets" min="1" required>
                        </div>
                    </div>

                    <button type="submit" class="btn-primary">Log Workout</button>
                </form>

                <div id="workout-result" class="workout-result"></div>
            </section>

            <!-- Workout History -->
            <section class="history-section">
                <h2>Workout History</h2>
                <div id="workout-history">
                    {% if workout_history %}
                        {% for workout in workout_history %}
                        <div class="workout-entry">
                            <div class="workout-header">
                                <span class="workout-exercise">{{ workout.exercise_name }}</span>
                                <span class="workout-xp">+{{ workout.xp_earned }} XP</span>
                            </div>
                            <div class="workout-details">
                                {{ workout.weight }} lbs Ã— {{ workout.reps }} reps Ã— {{ workout.sets }} sets
                            </div>
                            <div class="workout-date">{{ workout.timestamp[:10] }}</div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <p class="no-history">No workouts logged yet. Start your journey!</p>
                    {% endif %}
                </div>
            </section>
        </div>
    </div>

    <!-- Level Up Modal -->
    <div id="level-up-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>ðŸŽ‰ Level Up!</h2>
            <p>Congratulations! You've reached <strong>Level <span id="new-level"></span></strong>!</p>
            <p>Your character has evolved!</p>
            <button class="btn-primary" onclick="closeLevelUpModal()">Awesome!</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>

